# vi: ft=sh

set -g escape-time 0
set -g aggressive-resize
set -g base-index 1
set -g pane-base-index 1

set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

set-window-option -g window-status-current-bg black
set-window-option -g window-status-current-fg white

set -g status-bg white
set -g status-fg black
set -g status-left ""
set -g status-right "#[fg=blue]#H"

set -g prefix M-q
bind-key M-q last-window
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# for keeping $PWD:
bind-key c run-shell 'tmux new-window "cd \"$(tmux show-environment $(echo "TMUXPWD_#D" | tr -d %) | sed -e "s/^.*=//")\"; exec $SHELL"'
bind-key '"' run-shell 'tmux split-window -v "cd \"$(tmux show-environment $(echo "TMUXPWD_#D" | tr -d %) | sed -e "s/^.*=//")\"; exec $SHELL"'
bind-key % run-shell 'tmux split-window -h "cd \"$(tmux show-environment $(echo "TMUXPWD_#D" | tr -d %) | sed -e "s/^.*=//")\"; exec $SHELL"'
bind-key M-c switch-client -Twindow
bind-key -Twindow c new-window
bind-key -Twindow '"' split-window -v
bind-key -Twindow % split-window -h

# "dynamic" renaming:
set -g window-status-format         "#I:#W#{?#{==:#W,#{pane_current_command}},,#{?#{==:#{pane_current_command},#(basename $SHELL)},,(#{pane_current_command})}}#F"
set -g window-status-current-format "#I:#W#{?#{==:#W,#{pane_current_command}},,#{?#{==:#{pane_current_command},#(basename $SHELL)},,(#{pane_current_command})}}#F"

# appearance:
set -g window-style "bg=#f5f5d5"
set -g window-active-style "bg=#ffffeb"
set -g pane-border-fg "#f5f5d5"
set -g pane-border-bg "#f5f5d5"
set -g pane-active-border-fg "#f5f5d5"
set -g pane-active-border-bg "#f5f5d5"

# mouse mode:
run-shell ~/config/tmux/plugins/tmux-better-mouse-mode/scroll_copy_mode.tmux
set -g mouse on
set -g @emulate-scroll-for-no-mouse-alternate-buffer on
